% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calibrate_surv.R
\name{calibrate_surv}
\alias{calibrate_surv}
\title{Predictive calibration of survival models at a time horizon}
\usage{
calibrate_surv(
  fit,
  data,
  time_col,
  status_col,
  time_point,
  ngroups = 10,
  observed_method = c("km", "binary"),
  predict_fun = NULL
)
}
\arguments{
\item{fit}{A fitted survival model. For Cox, a \code{coxph} object.}

\item{data}{A data frame containing predictions and observed outcomes.}

\item{time_col}{Name of the time column (character).}

\item{status_col}{Name of the event status column (\code{1 = event}, \code{0 = censor}).}

\item{time_point}{Numeric value specifying the time horizon at which to calibrate (e.g., \code{365}).}

\item{ngroups}{Integer number of risk groups (quantiles). Default is \code{10}.}

\item{observed_method}{Either \code{"binary"} (fraction with \code{time > time_point})
or \code{"km"} (Kaplan-Meier estimate at \code{time_point}). Default is \code{"km"}.}

\item{predict_fun}{Optional function \verb{(fit, data, time_point) -> numeric}
returning predicted survival probabilities in \verb{[0, 1]}. If \code{NULL} and \code{fit}
is a Cox model, a baseline-hazard approach is used.}
}
\value{
A data frame with the following columns:
\itemize{
\item \code{RiskGroup}
\item \code{n}
\item \code{ObservedSurvival}
\item \code{PredictedSurvival}
}
}
\description{
Calibrates a survival model by grouping subjects into risk quantiles
(based on predicted survival at a given \code{time_point}) and comparing
observed versus predicted survival per group.
}
\details{
Supports Cox PH models out of the box. For other models, you may pass a
custom prediction function via \code{predict_fun}.
}
\examples{
\dontrun{
library(survival)
lung <- survival::lung
lung$status01 <- as.integer(lung$status == 2)
cfit <- survival::coxph(survival::Surv(time, status01) ~ age + sex, data = lung)
cal <- calibrate_surv(
  fit = cfit,
  data = lung,
  time_col = "time",
  status_col = "status01",
  time_point = 365,
  ngroups = 10,
  observed_method = "km"
)
head(cal)
}

}
